{"version":3,"file":"keysort.esm.min.js","sources":["../src/regex.js","../src/keysort.js","../src/explode.js"],"sourcesContent":["export const notDot = /-|\\s/;\nexport const braceS = \"[\\\"\";\nexport const braceE = \"\\\"]\";\n","import {explode} from \"./explode.js\";\nimport {notDot, braceS, braceE} from \"./regex.js\";\n\nexport function keysort (obj, query, sub = \"\") {\n\tconst queries = explode(query.replace(/\\s*asc/ig, \"\").replace(/\\s*desc/ig, \" desc\")).map(i => i.split(\" \")),\n\t\tsorts = [];\n\n\tif (sub) {\n\t\tsub = \".\" + sub;\n\t}\n\n\tfor (const [a, b] of queries) {\n\t\tconst desc = b === \"desc\",\n\t\t\ty = desc ? 1 : -1,\n\t\t\tx = desc ? -1 : 1;\n\n\t\tlet s = \".\",\n\t\t\te = \"\";\n\n\t\tif (notDot.test(a)) {\n\t\t\ts = braceS;\n\t\t\te = braceE;\n\t\t}\n\n\t\tsorts.push(\"if (a\" + sub + s + a + e + \" !== undefined && b\" + sub + s + a + e + \" !== undefined) {\");\n\t\tsorts.push(\"  if (a\" + sub + s + a + e + \" < b\" + sub + s + a + e + \") return \" + y + \";\");\n\t\tsorts.push(\"  if (a\" + sub + s + a + e + \" > b\" + sub + s + a + e + \") return \" + x + \";\");\n\t\tsorts.push(\"} else {\");\n\t\tsorts.push(\"  if (a\" + sub + s + a + e + \" !== undefined) return \" + y + \";\");\n\t\tsorts.push(\"  if (b\" + sub + s + a + e + \" !== undefined) return \" + x + \";\");\n\t\tsorts.push(\"}\");\n\t}\n\n\tsorts.push(\"return 0;\");\n\n\treturn obj.sort(new Function(\"a\", \"b\", sorts.join(\"\\n\")));\n}\n","export function explode (obj, arg = \",\") {\n\treturn obj.replace(/^(\\s+|\\t+)|(\\s+|\\t+)$/g, \"\").split(new RegExp(\"\\\\s*\" + arg + \"\\\\s*\"));\n}\n"],"names":["notDot","keysort","obj","query","sub","queries","arg","replace","split","RegExp","explode","map","i","sorts","a","b","desc","y","x","s","e","test","push","sort","Function","join"],"mappings":";;;;AAAO,MAAMA,EAAS,OCGf,SAASC,EAASC,EAAKC,EAAOC,EAAM,IAC1C,MAAMC,ECJA,SAAkBH,EAAKI,EAAM,KACnC,OAAOJ,EAAIK,QAAQ,yBAA0B,IAAIC,MAAM,IAAIC,OAAO,OAASH,EAAM,QAClF,CDEiBI,CAAQP,EAAMI,QAAQ,WAAY,IAAIA,QAAQ,YAAa,UAAUI,KAAIC,GAAKA,EAAEJ,MAAM,OACrGK,EAAQ,GAELT,IACHA,EAAM,IAAMA,GAGb,IAAK,MAAOU,EAAGC,KAAMV,EAAS,CAC7B,MAAMW,EAAa,SAAND,EACZE,EAAID,EAAO,GAAK,EAChBE,EAAIF,GAAQ,EAAI,EAEjB,IAAIG,EAAI,IACPC,EAAI,GAEDpB,EAAOqB,KAAKP,KACfK,EDnBmB,KCoBnBC,EDnBmB,MCsBpBP,EAAMS,KAAK,QAAUlB,EAAMe,EAAIL,EAAIM,EAAI,sBAAwBhB,EAAMe,EAAIL,EAAIM,EAAI,qBACjFP,EAAMS,KAAK,UAAYlB,EAAMe,EAAIL,EAAIM,EAAI,OAAShB,EAAMe,EAAIL,EAAIM,EAAI,YAAcH,EAAI,KACtFJ,EAAMS,KAAK,UAAYlB,EAAMe,EAAIL,EAAIM,EAAI,OAAShB,EAAMe,EAAIL,EAAIM,EAAI,YAAcF,EAAI,KACtFL,EAAMS,KAAK,YACXT,EAAMS,KAAK,UAAYlB,EAAMe,EAAIL,EAAIM,EAAI,0BAA4BH,EAAI,KACzEJ,EAAMS,KAAK,UAAYlB,EAAMe,EAAIL,EAAIM,EAAI,0BAA4BF,EAAI,KACzEL,EAAMS,KAAK,IACX,CAID,OAFAT,EAAMS,KAAK,aAEJpB,EAAIqB,KAAK,IAAIC,SAAS,IAAK,IAAKX,EAAMY,KAAK,OACnD,QAAAxB"}
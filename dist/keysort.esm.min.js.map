{"version":3,"file":"keysort.esm.min.js","sources":["../src/regex.js","../src/keysort.js","../src/explode.js"],"sourcesContent":["export const notDot = /-|\\s/;\r\nexport const braceS = \"[\\\"\";\r\nexport const braceE = \"\\\"]\";\r\n","import {explode} from \"./explode.js\";\r\nimport {notDot, braceS, braceE} from \"./regex.js\";\r\n\r\nconst nu = \" !== undefined\";\r\n\r\nexport function keysort (obj, query) {\r\n\tconst queries = explode(query.replace(/\\s*asc/ig, \"\").replace(/\\s*desc/ig, \" desc\")).map(i => i.split(\" \")),\r\n\t\tsorts = [];\r\n\r\n\tfor (const [a, b] of queries) {\r\n\t\tconst y = b === \"desc\" ? 1 : -1,\r\n\t\t\tx = -y;\r\n\r\n\t\tlet s = \".\",\r\n\t\t\te = \"\";\r\n\r\n\t\tif (notDot.test(a)) {\r\n\t\t\ts = braceS;\r\n\t\t\te = braceE;\r\n\t\t}\r\n\r\n\t\tsorts.push(`if (a${s}${a}${e}${nu} && b${s}${a}${e}${nu}) {`);\r\n\t\tsorts.push(`  if (a${s}${a}${e} < b${s}${a}${e}) return ${y};`);\r\n\t\tsorts.push(`  if (a${s}${a}${e} > b${s}${a}${e}) return ${x};`);\r\n\t\tsorts.push(\"} else {\");\r\n\t\tsorts.push(`  if (a${s}${a}${e}${nu}) return ${y};`);\r\n\t\tsorts.push(`  if (b${s}${a}${e}${nu}) return ${x};`);\r\n\t\tsorts.push(\"}\");\r\n\t}\r\n\r\n\tsorts.push(\"return 0;\");\r\n\r\n\treturn obj.sort(new Function(\"a\", \"b\", sorts.join(\"\\n\")));\r\n}\r\n","export function explode (obj, arg = \",\") {\r\n\treturn obj.replace(/^(\\s+|\\t+)|(\\s+|\\t+)$/g, \"\").split(new RegExp(\"\\\\s*\" + arg + \"\\\\s*\"));\r\n}\r\n"],"names":["notDot","nu","keysort","obj","query","queries","arg","replace","split","RegExp","explode","map","i","sorts","a","b","y","x","s","e","test","push","sort","Function","join"],"mappings":";;;;AAAO,MAAMA,EAAS,OCGhBC,EAAK,iBAEJ,SAASC,EAASC,EAAKC,GAC7B,MAAMC,ECNA,SAAkBF,EAAKG,EAAM,KACnC,OAAOH,EAAII,QAAQ,yBAA0B,IAAIC,MAAM,IAAIC,OAAO,OAASH,EAAM,QAClF,CDIiBI,CAAQN,EAAMG,QAAQ,WAAY,IAAIA,QAAQ,YAAa,UAAUI,KAAIC,GAAKA,EAAEJ,MAAM,OACrGK,EAAQ,GAET,IAAK,MAAOC,EAAGC,KAAMV,EAAS,CAC7B,MAAMW,EAAU,SAAND,EAAe,GAAK,EAC7BE,GAAKD,EAEN,IAAIE,EAAI,IACPC,EAAI,GAEDnB,EAAOoB,KAAKN,KACfI,EDhBmB,KCiBnBC,EDhBmB,MCmBpBN,EAAMQ,KAAK,QAAQH,IAAIJ,IAAIK,IAAIlB,SAAUiB,IAAIJ,IAAIK,IAAIlB,QACrDY,EAAMQ,KAAK,UAAUH,IAAIJ,IAAIK,QAAQD,IAAIJ,IAAIK,aAAaH,MAC1DH,EAAMQ,KAAK,UAAUH,IAAIJ,IAAIK,QAAQD,IAAIJ,IAAIK,aAAaF,MAC1DJ,EAAMQ,KAAK,YACXR,EAAMQ,KAAK,UAAUH,IAAIJ,IAAIK,IAAIlB,aAAce,MAC/CH,EAAMQ,KAAK,UAAUH,IAAIJ,IAAIK,IAAIlB,aAAcgB,MAC/CJ,EAAMQ,KAAK,IACX,CAID,OAFAR,EAAMQ,KAAK,aAEJlB,EAAImB,KAAK,IAAIC,SAAS,IAAK,IAAKV,EAAMW,KAAK,OACnD,QAAAtB"}
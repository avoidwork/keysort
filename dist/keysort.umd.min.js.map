{"version":3,"file":"keysort.umd.min.js","sources":["../src/explode.js","../src/regex.js","../src/constants.js","../src/keysort.js"],"sourcesContent":["export function explode (obj, arg = \",\") {\r\n\treturn obj.trim().split(new RegExp(`\\\\s*${arg}\\\\s*`));\r\n}\r\n","export const NOT_DOT = /-|\\s/;\r\nexport const BRACE_START = \"[\\\"\";\r\nexport const BRACE_END = \"\\\"]\";\r\n","export const DESC = \"desc\";\r\nexport const EMPTY = \"\";\r\nexport const NOT_UNDEFINED = \" !== undefined\";\r\nexport const PERIOD = \".\";\r\nexport const SPACE = \" \";\r\nexport const SPACE_DESC = \" desc\";\r\n","import {explode} from \"./explode.js\";\r\nimport {BRACE_END, BRACE_START, NOT_DOT} from \"./regex.js\";\r\nimport {DESC, EMPTY, NOT_UNDEFINED, PERIOD, SPACE, SPACE_DESC} from \"./constants.js\";\r\n\r\nexport function keysort (obj = [], query = \"\", toSorted = false) {\r\n\tconst queries = explode(query.replace(/\\s*asc/ig, EMPTY).replace(/\\s*desc/ig, SPACE_DESC)).map(i => i.split(SPACE)),\r\n\t\tsorts = [];\r\n\r\n\tfor (const [a, b] of queries) {\r\n\t\tconst y = b === DESC ? 1 : -1,\r\n\t\t\tx = -y;\r\n\r\n\t\tlet s = PERIOD,\r\n\t\t\te = EMPTY;\r\n\r\n\t\tif (NOT_DOT.test(a)) {\r\n\t\t\ts = BRACE_START;\r\n\t\t\te = BRACE_END;\r\n\t\t}\r\n\r\n\t\tsorts.push(`if (a${s}${a}${e}${NOT_UNDEFINED} && b${s}${a}${e}${NOT_UNDEFINED}) {`);\r\n\t\tsorts.push(`  if (a${s}${a}${e} < b${s}${a}${e}) return ${y};`);\r\n\t\tsorts.push(`  if (a${s}${a}${e} > b${s}${a}${e}) return ${x};`);\r\n\t\tsorts.push(\"} else {\");\r\n\t\tsorts.push(`  if (a${s}${a}${e}${NOT_UNDEFINED}) return ${y};`);\r\n\t\tsorts.push(`  if (b${s}${a}${e}${NOT_UNDEFINED}) return ${x};`);\r\n\t\tsorts.push(\"}\");\r\n\t}\r\n\r\n\tsorts.push(\"return 0;\");\r\n\r\n\treturn obj[toSorted ? \"toSorted\" : \"sort\"](new Function(\"a\", \"b\", sorts.join(\"\\n\")));\r\n}\r\n"],"names":["g","f","exports","module","define","amd","globalThis","self","lru","this","NOT_DOT","NOT_UNDEFINED","keysort","obj","query","toSorted","queries","arg","trim","split","RegExp","explode","replace","map","i","sorts","a","b","y","x","s","e","test","push","Function","join"],"mappings":";;;;CAAO,SAAAA,EAAAC,GAAA,iBAAAC,SAAA,oBAAAC,OAAAF,EAAAC,SAAA,mBAAAE,QAAAA,OAAAC,IAAAD,OAAA,CAAA,WAAAH,GAAAA,GAAAD,EAAA,oBAAAM,WAAAA,WAAAN,GAAAO,MAAAC,IAAA,CAAA,EAAA,CAAA,CAAAC,MAAA,SAAAP,GAAA,aCAA,MAAMQ,EAAU,OCEVC,EAAgB,iBC8B7BT,EAAAU,QA5BO,SAAkBC,EAAM,GAAIC,EAAQ,GAAIC,GAAW,GACzD,MAAMC,EHLA,SAAkBH,EAAKI,EAAM,KACnC,OAAOJ,EAAIK,OAAOC,MAAM,IAAIC,OAAO,OAAOH,SAC3C,CGGiBI,CAAQP,EAAMQ,QAAQ,WDJlB,ICIqCA,QAAQ,YDAxC,UCAkEC,KAAIC,GAAKA,EAAEL,MDDlF,OCEnBM,EAAQ,GAET,IAAK,MAAOC,EAAGC,KAAMX,EAAS,CAC7B,MAAMY,EDTY,SCSRD,EAAa,GAAK,EAC3BE,GAAKD,EAEN,IAAIE,EDTgB,ICUnBC,EDZkB,GCcfrB,EAAQsB,KAAKN,KAChBI,EFfwB,KEgBxBC,EFfsB,MEkBvBN,EAAMQ,KAAK,QAAQH,IAAIJ,IAAIK,IAAIpB,SAAqBmB,IAAIJ,IAAIK,IAAIpB,QAChEc,EAAMQ,KAAK,UAAUH,IAAIJ,IAAIK,QAAQD,IAAIJ,IAAIK,aAAaH,MAC1DH,EAAMQ,KAAK,UAAUH,IAAIJ,IAAIK,QAAQD,IAAIJ,IAAIK,aAAaF,MAC1DJ,EAAMQ,KAAK,YACXR,EAAMQ,KAAK,UAAUH,IAAIJ,IAAIK,IAAIpB,aAAyBiB,MAC1DH,EAAMQ,KAAK,UAAUH,IAAIJ,IAAIK,IAAIpB,aAAyBkB,MAC1DJ,EAAMQ,KAAK,IACX,CAID,OAFAR,EAAMQ,KAAK,aAEJpB,EAAIE,EAAW,WAAa,QAAQ,IAAImB,SAAS,IAAK,IAAKT,EAAMU,KAAK,OAC9E,CAAA"}